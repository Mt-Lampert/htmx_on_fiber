{{/* {% include 'archive_ui.html' %} */}}

{{ $flashcolor := "red" }}

{{ with .Flash }}
{{     if eq .Status "success" }}
{{         $flashcolor = "color:green;" }}
{{     else }}
{{         $flashcolor = "color:#ffaa00;" }}
{{     end }}
<p style={{ $flashcolor }}>{{ .Msg }}</p>
{{ end }}

<div>
  <label for="search">search term</label>
  <input id="search" type="search" name="q" value="" placeholder="Search..."
         hx-get="/contacts/search"
         hx-trigger="keyup[this.value.length > 3] delay:200ms changed"
         hx-target="#theContacts"
  >
</div>

{{/* <form x-data="{ selected: [] }"> */}}
<form>
{{/* <template */}}
{{/*     x-if="selected.length > 0"> */}}
{{/*     <div class="box info tool-bar flxed top"> */}}
{{/*         <slot x-text="selected.length"></slot> */}}
{{/*         contacts selected */}}
      
{{/*         <button type="button" class="bad bg color border" */}}
{{/*             @click="confirm(`delete ${selected.length} contacts?`) && */}}
{{/*                 htmx.ajax('delete', '/contacts', { source: $root, target: document.body })" */}}
{{/*         >delete</button> */}}
{{/*         <hr aria-orientation="vertical"> */}}
{{/*         <button type="button" @click="selected = []">cancel</button> */}} 
{{/*     </div> */}}
{{/* </template> */}}
<table id="theContacts">
  <thead>
  <tr>
      <th></th>
      <th>first</th>
      <th>last</th>
      <th>phone</th>
      <th>email</th>
      <th></th>
  </tr>
  </thead>
  <tbody>
{{         template "rows" .contacts }}
  </tbody>
</table>
  {{/* <button hx-delete="/contacts" */}}
  {{/*         hx-confirm="are you sure you want to delete these contacts?" */}}
  {{/*         hx-target="body"> */}}
  {{/*     delete selected contacts */}}
  {{/* </button> */}}
</form>
<p>
Â  <button
    hx-get="/contacts/more"
    hx-target="#theContacts"
    hx-swap="outerHTML"
  >More</button> 
  <button
      hx-get="/contacts/reset"
      hx-target="#theContacts"
      hx-swap="outerHTML"
  >Reset</button>
</p>
<p>
  <a href="/contacts/new">Add Contact</a>
</p>

{{/* <p> */}}
{{/*     <a href="/contacts/new">add contact</a> */}}
{{/*     <span hx-get="/contacts/count" hx-trigger="revealed"> */}}
{{/*       <img id="spinner" style="height: 20px"  class="htmx-indicator" src="/static/img/spinning-circles.svg"/> */}}
{{/*     </span> */}}
{{/* </p> */}}


